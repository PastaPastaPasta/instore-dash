(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1346:function(e,t,r){var content=r(1399);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(49).default)("ba989d8e",content,!0,{sourceMap:!1})},1398:function(e,t,r){"use strict";var o=r(1346);r.n(o).a},1399:function(e,t,r){(t=r(48)(!1)).push([e.i,'*[data-v-5be21067],[data-v-5be21067]:after,[data-v-5be21067]:before{box-sizing:border-box}body[data-v-5be21067]{background:#012060}.loadcontainer[data-v-5be21067]{transform:translate(-50%,-50%);transform-style:preserve-3d;perspective:2000px;transform:rotateX(-30deg) rotateY(-45deg)}.holder[data-v-5be21067],.loadcontainer[data-v-5be21067]{position:absolute;top:50%;left:50%}.holder[data-v-5be21067]{transform:translate(-50%,-50%);transform-style:preserve-3d;transform:translate3d(0,3em,1.5em)}.holder[data-v-5be21067]:last-child{transform:rotateY(-90deg) rotateX(90deg) translate3d(0,3em,1.5em)}.holder[data-v-5be21067]:first-child{transform:rotate(-90deg) rotateX(-90deg) translate3d(0,3em,1.5em)}.holder:first-child .box[data-v-5be21067]{background-color:#008de4}.holder:first-child .box[data-v-5be21067]:before{background-color:#004e7e}.holder:first-child .box[data-v-5be21067]:after{background-color:#006db1}.holder:nth-child(2) .box[data-v-5be21067]{background-color:#787878}.holder:nth-child(2) .box[data-v-5be21067]:before{background-color:#454545}.holder:nth-child(2) .box[data-v-5be21067]:after{background-color:#5f5f5f}.holder:nth-child(3) .box[data-v-5be21067]{background-color:#fff}.holder:nth-child(3) .box[data-v-5be21067]:before{background-color:#ccc}.holder:nth-child(3) .box[data-v-5be21067]:after{background-color:#e6e6e6}.box[data-v-5be21067]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-style:preserve-3d;-webkit-animation:ani-box-data-v-5be21067 6s infinite;animation:ani-box-data-v-5be21067 6s infinite;width:3em;height:3em}.box[data-v-5be21067]:after,.box[data-v-5be21067]:before{position:absolute;width:100%;height:100%;content:""}.box[data-v-5be21067]:before{left:100%;bottom:0;transform:rotateY(90deg);transform-origin:0 50%}.box[data-v-5be21067]:after{left:0;bottom:100%;transform:rotateX(90deg);transform-origin:0 100%}@-webkit-keyframes ani-box-data-v-5be21067{8.33%{transform:translate3d(-50%,-50%,0) scaleZ(2)}16.7%{transform:translate3d(-50%,-50%,-3em) scaleZ(1)}25%{transform:translate3d(-50%,-100%,-3em) scaleY(2)}33.3%{transform:translate3d(-50%,-150%,-3em) scaleY(1)}41.7%{transform:translate3d(-100%,-150%,-3em) scaleX(2)}50%{transform:translate3d(-150%,-150%,-3em) scaleX(1)}58.3%{transform:translate3d(-150%,-150%,0) scaleZ(2)}66.7%{transform:translate3d(-150%,-150%,0) scaleZ(1)}75%{transform:translate3d(-150%,-100%,0) scaleY(2)}83.3%{transform:translate3d(-150%,-50%,0) scaleY(1)}91.7%{transform:translate3d(-100%,-50%,0) scaleX(2)}to{transform:translate3d(-50%,-50%,0) scaleX(1)}}@keyframes ani-box-data-v-5be21067{8.33%{transform:translate3d(-50%,-50%,0) scaleZ(2)}16.7%{transform:translate3d(-50%,-50%,-3em) scaleZ(1)}25%{transform:translate3d(-50%,-100%,-3em) scaleY(2)}33.3%{transform:translate3d(-50%,-150%,-3em) scaleY(1)}41.7%{transform:translate3d(-100%,-150%,-3em) scaleX(2)}50%{transform:translate3d(-150%,-150%,-3em) scaleX(1)}58.3%{transform:translate3d(-150%,-150%,0) scaleZ(2)}66.7%{transform:translate3d(-150%,-150%,0) scaleZ(1)}75%{transform:translate3d(-150%,-100%,0) scaleY(2)}83.3%{transform:translate3d(-150%,-50%,0) scaleY(1)}91.7%{transform:translate3d(-100%,-50%,0) scaleX(2)}to{transform:translate3d(-50%,-50%,0) scaleX(1)}}.checkmark__circle[data-v-5be21067]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#7ac142;fill:none;-webkit-animation:stroke-data-v-5be21067 .6s cubic-bezier(.65,0,.45,1) forwards;animation:stroke-data-v-5be21067 .6s cubic-bezier(.65,0,.45,1) forwards}.checkspace[data-v-5be21067]{stroke-width:2}.checkmark[data-v-5be21067],.checkspace[data-v-5be21067]{width:56px;height:56px;border-radius:50%;display:block;margin:10% auto}.checkmark[data-v-5be21067]{stroke-width:2;stroke:#fff;stroke-miterlimit:10;box-shadow:inset 0 0 0 #7ac142;-webkit-animation:fill-data-v-5be21067 .4s ease-in-out .4s forwards,scale-data-v-5be21067 .3s ease-in-out .9s both;animation:fill-data-v-5be21067 .4s ease-in-out .4s forwards,scale-data-v-5be21067 .3s ease-in-out .9s both}.checkmark__check[data-v-5be21067]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;-webkit-animation:stroke-data-v-5be21067 .3s cubic-bezier(.65,0,.45,1) .8s forwards;animation:stroke-data-v-5be21067 .3s cubic-bezier(.65,0,.45,1) .8s forwards}@-webkit-keyframes stroke-data-v-5be21067{to{stroke-dashoffset:0}}@keyframes stroke-data-v-5be21067{to{stroke-dashoffset:0}}@-webkit-keyframes scale-data-v-5be21067{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes scale-data-v-5be21067{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@-webkit-keyframes fill-data-v-5be21067{to{box-shadow:inset 0 0 0 30px #7ac142}}@keyframes fill-data-v-5be21067{to{box-shadow:inset 0 0 0 30px #7ac142}}',""]),e.exports=t},1417:function(e,t,r){"use strict";r.r(t);r(39),r(25),r(20),r(26),r(103);var o=r(32),n=(r(102),r(12)),c=r(3),l=(r(11),r(1)),d=r(247),m=r(10);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h=l.a.extend({props:{value:{type:String,default:""}},data:function(){return{loading:!1,items:[],search:null}},watch:{search:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("val :>> ",e),console.log("this.value :>> ",t.value),console.log("this.querySelections(val) :>> ",t.querySelections(e)),o=t.value?t.value.split(":")[0]:null,console.log("curVal :>> ",o),r.t0=e&&e!==o,!r.t0){r.next=9;break}return r.next=9,t.querySelections(e);case 9:case"end":return r.stop()}}),r)})))()}},methods:v(v({},Object(d.b)(["searchDashNames"])),{},{querySelections:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.searchDashNames(e);case 3:o=r.sent,t.items=o.map((function(e){return{text:e.data.label,value:"".concat(e.data.label,":").concat(e.id)}})),console.log("items :>> ",t.items),t.loading=!1;case 7:case"end":return r.stop()}}),r)})))()}})}),x=r(136),y=r(196),k=r.n(y),S=r(1348),component=Object(x.a)(h,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-autocomplete",{attrs:{loading:e.loading,items:e.items,"search-input":e.search,"cache-items":"",flat:"","hide-no-data":"","hide-details":"",label:"Customer name",solo:"",value:e.value},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},input:function(t){return e.$emit("input",t)}}})}),[],!1,null,null,null),P=component.exports;function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}k()(component,{VAutocomplete:S.a});var D=function(e){return new Promise((function(t){return setTimeout(t,e)}))},R=l.a.extend({components:{NameAutocomplete:P},data:function(){return{mode:"newSale",status:"",memo:"",prevDocument:{},fiatAmount:0,refId:"",customer:":",waitingForPayment:!1,satoshisReceived:0,satoshisRequested:-1,isPaid:!1,document:{}}},computed:{dashReceived:function(){return m.Unit.fromSatoshis(this.satoshisReceived).toBTC()},dashRequested:function(){return m.Unit.fromSatoshis(this.satoshisRequested).toBTC()},fiatSymbol:{get:function(){return this.$store.state.pos.currency},set:function(e){this.$store.commit("setPosCurrency",e)}},confirmCaption:function(){var e,t=Math.round(100*this.fiatAmount-100*(null===(e=this.prevDocument)||void 0===e?void 0:e.encFiatAmount))/100;return"Refunded"===this.status&&(t=Math.round(100*this.fiatAmount)/100),t<0?{color:"blue",text:"Decrease: ".concat(t," ").concat(this.fiatSymbol),enabled:!0}:t>0?{text:"Increase: ".concat(t," ").concat(this.fiatSymbol),enabled:!0}:this.fiatAmount>0?{text:"Confirm",enabled:!0}:{text:"Confirm"}}},created:function(){this.mode=this.$store.state.pos.mode,this.customer="".concat(this.$store.state.pos.requesteeUserName,":").concat(this.$store.state.pos.requesteeUserId),this.prevDocument=this.$store.state.pos.prevDocument,this.fiatAmount=this.$store.state.pos.fiatAmount,this.refId=this.$store.state.pos.refId,this.status=this.$store.state.pos.status,console.log(this.customer,this.fiatAmount,this.refId),this.$store.commit("resetPOSOptions")},methods:w(w({},Object(d.b)(["requestFiat","requestPayment","getAddressSummary","refundPaymentRequest"])),{},{sendRequest:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,c,l,d,m,f,v,h,x,y,k,S,summary;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("this.mode :>> ",e.mode),"Amend"!==e.mode){t.next=25;break}return r=e.fiatAmount,o=e.memo,n=e.prevDocument,c=n.requesteeUserId,l=n.requesteeUserName,d=n.refId,m=n.encSatoshis,f=n.encFiatSymbol,v=n.encAddress,h=n.encFiatAmount,x=parseFloat(h)/parseFloat(m),console.log("rate :>> ",x),y=Math.round(100*parseFloat(h)-100*r)/100,k=Math.floor(y/x),console.log("refundSatoshis :>> ",k),S=m-k,console.log("satoshis :>> ",S),t.next=14,e.getAddressSummary(v);case 14:if(summary=t.sent,console.log("summary :>> ",summary),!(summary.totalBalanceSat<=S)){t.next=19;break}return e.reqPayment(),t.abrupt("return");case 19:return e.$store.commit("showSnackbar",{text:"Refunding ".concat(y," ").concat(f," to ").concat(l),color:"blue"}),t.next=22,e.requestPayment({requesteeUserId:c,requesteeUserName:l,satoshis:S,memo:o,refId:d,fiatAmount:r,fiatSymbol:f,address:v});case 22:return t.next=24,e.refundPaymentRequest({requestDocument:e.prevDocument,satoshis:k});case 24:e.$router.push("/");case 25:"Intent"===e.mode&&e.reqPayment();case 26:case"end":return t.stop()}}),t)})))()},pollWaitForPayment:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,summary;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.document,e.satoshisRequested=r.encSatoshis,t.next=4,e.getAddressSummary(r.encAddress);case 4:if(summary=t.sent,e.satoshisReceived=summary.totalBalanceSat,!(e.satoshisReceived>=r.encSatoshis)){t.next=11;break}e.isPaid=!0,setTimeout((function(){e.$router.push("/")}),5e3),t.next=14;break;case 11:return t.next=13,D(2e3);case 13:e.pollWaitForPayment();case 14:case"end":return t.stop()}}),t)})))()},cancelRequest:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.document,o=e.prevDocument,n=e.requestPayment,c=e.$router,o.encSatoshis?((l=o).satoshis=o.encSatoshis,l.fiatAmount=o.encFiatAmount,l.fiatSymbol=o.encFiatSymbol,l.address=o.encAddress):((l=r).satoshis=0,l.fiatAmount=0,l.address=r.encAddress,l.fiatSymbol=r.encFiatSymbol),console.log("cancel document :>> ",l),t.next=5,n(l);case 5:c.push("/");case 6:case"end":return t.stop()}}),t)})))()},reqPayment:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,l,d,m,f,address,v,h,x,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.waitingForPayment=!0,r=e.customer,n=e.fiatAmount,c=e.fiatSymbol,l=e.memo,d=e.refId,m=e.requestFiat,f=e.prevDocument,console.log("fiatAmount :>> ",n),console.log("fiatSymbol :>> ",c),console.log("memo :>> ",l),console.log("customer :>> ",r),address=null==f?void 0:f.encAddress,console.log("previous Address :>> ",address),v=r.split(":"),h=Object(o.a)(v,2),x=h[0],y=h[1],t.next=11,m({requesteeUserId:y,requesteeUserName:x,fiatAmount:n,fiatSymbol:c,refId:d,memo:l,address:address});case 11:e.document=t.sent,console.log("request fiat document :>> ",e.document),e.pollWaitForPayment();case 14:case"end":return t.stop()}}),t)})))()}})}),A=(r(1398),r(1341)),O=r(326),C=r(1353),N=r(1342),F=r(1413),j=r(1336),B=r(1414),M=r(1347),T=Object(x.a)(R,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto pa-2",attrs:{"max-width":"550px"}},["Amend"===e.mode?r("v-alert",{attrs:{color:"blue",outlined:""}},[e._v("Amending Request: "+e._s(e.refId))]):e._e(),e._v(" "),"Intent"===e.mode?r("v-alert",{attrs:{color:"green",outlined:""}},[e._v("New Sale for Intent: "+e._s(e.refId))]):e._e(),e._v(" "),"newSale"===e.mode?r("v-alert",{attrs:{color:"green",outlined:""}},[e._v("New Sale")]):e._e(),e._v(" "),r("p",[e._v("Customer name:")]),e._v(" "),"Amend"===e.mode?r("p",[e._v(e._s(e.customer.split(":")[0]))]):e._e(),e._v(" "),"Intent"===e.mode?r("p",[e._v(e._s(e.customer.split(":")[0]))]):e._e(),e._v(" "),"newSale"===e.mode?r("NameAutocomplete",{model:{value:e.customer,callback:function(t){e.customer=t},expression:"customer"}}):e._e(),e._v(" "),r("v-text-field",{attrs:{label:"Order Description"},model:{value:e.memo,callback:function(t){e.memo=t},expression:"memo"}}),e._v(" "),r("v-card-actions",[r("v-text-field",{attrs:{label:"Order Amount",type:"number",step:"0.01",min:"0"},model:{value:e.fiatAmount,callback:function(t){e.fiatAmount=t},expression:"fiatAmount"}}),e._v(" "),r("v-overflow-btn",{staticClass:"mb-3",attrs:{items:["USD","EUR","BRL","COP","VES","AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BSD","BTC","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLF","CLP","CNH","CNY","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","ETH","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTC","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMW"],label:"Currency"},model:{value:e.fiatSymbol,callback:function(t){e.fiatSymbol=t},expression:"fiatSymbol"}})],1),e._v(" "),r("v-btn",{attrs:{color:"error",nuxt:"",to:"/"}},[e._v("Cancel")]),e._v(" "),r("v-btn",{attrs:{disabled:!e.confirmCaption.enabled,color:e.confirmCaption.color||"success"},on:{click:e.sendRequest}},[e._v(e._s(e.confirmCaption.text))]),e._v(" "),r("v-overlay",{attrs:{value:e.waitingForPayment}},[r("v-card",{attrs:{color:"#012060","min-width":"285px"}},[r("v-card-title",{staticClass:"text-center mx-auto"},[e._v("Payment Request")]),e._v(" "),e.isPaid?e._e():r("div",{staticClass:"loadcontainer mt-n8"},[r("div",{staticClass:"holder"},[r("div",{staticClass:"box"})]),e._v(" "),r("div",{staticClass:"holder"},[r("div",{staticClass:"box"})]),e._v(" "),r("div",{staticClass:"holder"},[r("div",{staticClass:"box"})])]),e._v(" "),r("v-spacer",{staticStyle:{height:"40px"}}),e._v(" "),e.isPaid?e._e():r("v-spacer",{staticStyle:{height:"120px"}}),e._v(" "),e.isPaid?r("svg",{staticClass:"checkmark",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"}},[r("circle",{staticClass:"checkmark__circle",attrs:{cx:"26",cy:"26",r:"25",fill:"none"}}),e._v(" "),r("path",{staticClass:"checkmark__check",attrs:{fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}})]):e._e(),e._v(" "),r("v-spacer",{staticStyle:{height:"50px"}}),e._v(" "),r("v-card-text",{staticClass:"text-center"},[e._v("\n        From: "+e._s(e.customer.split(":")[0])+" "),r("br"),e._v("\n        Amount: "+e._s(e.fiatAmount)+" "+e._s(e.fiatSymbol)),r("br"),e._v(" "),e.satoshisReceived>0?r("span",[e._v("\n          Received "+e._s(e.dashReceived)+" / "+e._s(e.dashRequested)+" Dash")]):r("span",[e._v("Waiting .. ")])]),e._v(" "),r("v-card-actions",[e.isPaid?e._e():r("v-btn",{staticClass:"mx-auto",attrs:{color:"red"},on:{click:function(t){return e.cancelRequest()}}},[e._v("Cancel")]),e._v(" "),e.isPaid?e._e():r("v-btn",{staticClass:"mx-auto",attrs:{color:"blue"},on:{click:function(t){e.waitingForPayment=!1}}},[e._v("Amend")]),e._v(" "),e.isPaid?r("v-btn",{staticClass:"mx-auto",attrs:{nuxt:"",to:"/",color:"green"}},[e._v("Done")]):e._e()],1)],1)],1)],1)}),[],!1,null,"5be21067",null);t.default=T.exports;k()(T,{VAlert:A.a,VBtn:O.a,VCard:C.a,VCardActions:N.a,VCardText:N.c,VCardTitle:N.d,VOverflowBtn:F.a,VOverlay:j.a,VSpacer:B.a,VTextField:M.a})}}]);